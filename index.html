<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Diwali Greeting — Quick & Professional</title>
  <style>
    :root{
      --bg1: #fffaf0;
      --bg2: #fff0f5;
      --accent: #ff7b54;
      --accent2: #ffd166;
      --muted: #6b6b6b;
      --card-bg: rgba(255,255,255,0.85);
      --glass: rgba(255,255,255,0.6);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: "Inter", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(120deg,var(--bg1), #fffaf8 40%, #fff1f6 100%);
      color:#222;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
    }

    .wrap{
      width:100%;
      max-width:1100px;
      display:grid;
      grid-template-columns: 420px 1fr;
      gap:24px;
      align-items:start;
    }

    .panel{
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.75));
      border-radius:16px;
      padding:20px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.08);
      backdrop-filter: blur(6px);
    }

    h1{font-size:20px;margin:0 0 8px;}
    p.lead{margin:0 0 16px;color:var(--muted);font-size:14px}

    label{display:block;font-size:13px;color:#444;margin-top:10px}
    input[type="text"], textarea, select{
      width:100%;
      padding:10px 12px;
      margin-top:6px;
      border-radius:10px;
      border: 1px solid #eee;
      font-size:14px;
      background: linear-gradient(180deg,#fff,#fbfbfb);
      resize:vertical;
    }

    textarea{min-height:90px}

    .row{display:flex;gap:10px;margin-top:12px}
    button{
      background:linear-gradient(90deg,var(--accent), #ff936f);
      border:none;
      color:#fff;
      padding:10px 14px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
      box-shadow:0 6px 18px rgba(255,123,84,0.18);
    }
    button.secondary{
      background:transparent;color:var(--accent);border:1px solid rgba(255,123,84,0.12);
      box-shadow:none;font-weight:600;
    }
    .small{font-size:13px;padding:8px 10px}

    /* Preview card */
    .preview-wrap{position:relative;display:flex;align-items:center;justify-content:center;min-height:520px}
    .card{
      width:90%;
      max-width:720px;
      border-radius:20px;
      padding:36px;
      background: linear-gradient(180deg,#fff,#fff9f5);
      box-shadow: 0 20px 60px rgba(0,0,0,0.12);
      position:relative;
      overflow:hidden;
    }

    .greeting-line{
      font-family: "Georgia", serif;
      font-size:34px;
      line-height:1.15;
      color:#3b2b28;
      margin:18px 0 10px;
      text-align:center;
      letter-spacing:0.2px;
      transition: transform .35s ease, opacity .35s ease;
    }
    .greeting-sub{color:var(--muted);text-align:center;margin:0 0 20px;font-size:15px}

    .from{display:block;text-align:center;font-weight:700;color:#6b3a2a;margin-top:12px}

    /* Decorative lamps */
    .lamp{
      position:absolute;
      width:120px;height:160px;
      left:-30px; top:-10px;
      opacity:0.95;
      transform-origin:center;
      animation: floaty 5s ease-in-out infinite;
      pointer-events:none;
    }
    .lamp.right{right:-40px;left:auto;top:30px;transform:scaleX(-1);animation-delay:0.8s}
    @keyframes floaty{0%{transform:translateY(0) rotate(-2deg)}50%{transform:translateY(-12px) rotate(2deg)}100%{transform:translateY(0) rotate(-2deg)}}

    /* Confetti */
    .confetti { position:absolute; inset:0; pointer-events:none; }
    .c { position:absolute; width:10px;height:16px; opacity:0.9; border-radius:2px; animation: conf 2.6s linear infinite; }
    @keyframes conf {
      0% { transform: translateY(-10vh) rotate(0deg); }
      100% { transform: translateY(110vh) rotate(540deg); opacity:0.95; }
    }

    /* Controls area smaller box */
    .panel small{color:var(--muted);display:block;margin-top:8px;font-size:12px}

    /* Responsive */
    @media (max-width:980px){
      .wrap{grid-template-columns:1fr; padding-bottom:60px}
      .preview-wrap{min-height:420px}
      .card{padding:28px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <h1>Diwali Greeting — Quick Generator</h1>
      <p class="lead">Enter the name or a short prompt below — then a professional-styled greeting will appear. You can Copy or Download it.</p>

      <label>Recipient / Short prompt</label>
      <input id="name" type="text" placeholder="e.g. Anushka / My sister / Team" />

      <label>Short custom note (optional)</label>
      <textarea id="note" placeholder="Add some context (e.g. enjoyed last year's celebration, loves sweets)"></textarea>

      <label>Style</label>
      <select id="style">
        <option value="warm">Warm & Personal</option>
        <option value="formal">Formal & Elegant</option>
        <option value="fun">Playful & Bright</option>
      </select>

      <div class="row" style="margin-top:16px;">
        <button id="genBtn">Generate Greeting</button>
        <button id="copyBtn" class="secondary small">Copy</button>
        <button id="downloadBtn" class="secondary small">Download PNG</button>
      </div>

      <small>Tip: A longer message will be generated — if you want to adjust it in the card, edit and generate again.</small>
    </div>

    <div class="panel preview-wrap">
      <div class="card" id="card">
        <!-- Left decorative lamp -->
        <svg class="lamp" viewBox="0 0 64 84" xmlns="http://www.w3.org/2000/svg" aria-hidden>
          <g>
            <ellipse cx="32" cy="70" rx="22" ry="8" fill="#f8e4b6"/>
            <path d="M18 48c4 6 14 8 28 0 0 0 3 14-14 28-14-12-14-28-14-28z" fill="#ffb36b"/>
            <path d="M34 18c0-6-4-10-6-10s-6 4-6 10 6 18 6 18 6-12 6-18z" fill="#ffec99"/>
          </g>
        </svg>

        <!-- Right lamp -->
        <svg class="lamp right" viewBox="0 0 64 84" xmlns="http://www.w3.org/2000/svg" aria-hidden>
          <g>
            <ellipse cx="32" cy="70" rx="22" ry="8" fill="#fde7c8"/>
            <path d="M18 48c4 6 14 8 28 0 0 0 3 14-14 28-14-12-14-28-14-28z" fill="#ffd1a4"/>
            <path d="M34 18c0-6-4-10-6-10s-6 4-6 10 6 18 6 18 6-12 6-18z" fill="#fff8c6"/>
          </g>
        </svg>

        <div id="greetingBlock" style="position:relative;z-index:3">
          <div style="text-align:center">
            <div style="font-size:13px;color:#8b6b63;font-weight:700">Shubh Deepavali</div>
            <div id="greeting" class="greeting-line">May your dreams shine bright — Wishing you a joyous and prosperous Diwali!</div>
            <div id="sub" class="greeting-sub">May this festival of lights bring you joy, peace and success.</div>
            <div id="from" class="from">— From your <strong>Team</strong></div>
          </div>
        </div>

        <!-- confetti -->
        <div class="confetti" id="confetti"></div>

      </div>
    </div>
  </div>

  <script>
    const TEMPLATES = {
      warm: [
        "Happy Diwali, {name}! May your home be filled with light, love, and laughter. Wishing you and your family a joyful and prosperous festival.",
        "Dear {name}, wishing you a Diwali full of moments to treasure. May the diyas of happiness and success light your life.",
        "To {name}: Sending warm wishes this Diwali — may you be blessed with peace, health and bright beginnings."
      ],
      formal: [
        "Wishing you a very Happy Diwali, {name}. May this festival illuminate your path to continued success and prosperity.",
        "Dear {name}, may the auspicious festival of Diwali bring you peace, prosperity, and growth in all your endeavors.",
        "Warm Diwali greetings to you, {name}. May the coming year be filled with achievements and goodwill."
      ],
      fun:[
        "Woohoo {name}! Light the diyas, enjoy the sweets — have a sparkling Diwali full of laughter and fun!",
        "{name}, here's to a Diwali that's as bright and joyful as you — enjoy every moment!",
        "Big festive hugs {name}! May your Diwali be lit with positivity, laddoos and lots of happy memories."
      ]
    };

    const nameEl = document.getElementById('name');
    const noteEl = document.getElementById('note');
    const styleEl = document.getElementById('style');
    const genBtn = document.getElementById('genBtn');
    const greetingEl = document.getElementById('greeting');
    const subEl = document.getElementById('sub');
    const fromEl = document.getElementById('from');
    const copyBtn = document.getElementById('copyBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const confettiContainer = document.getElementById('confetti');

    function spawnConfetti(){
      confettiContainer.innerHTML = '';
      const colors = ['#ffd166','#ff6b6b','#6bf0c3','#7bcfff','#ffb36b','#c388ff'];
      for(let i=0;i<26;i++){
        const el = document.createElement('div');
        el.className = 'c';
        el.style.left = (Math.random()*95)+'%';
        el.style.top = (-10 - Math.random()*20)+'vh';
        el.style.background = colors[Math.floor(Math.random()*colors.length)];
        el.style.transform = `rotate(${Math.random()*360}deg)`;
        el.style.animationDelay = (Math.random()*2)+'s';
        el.style.width = (6 + Math.random()*12)+'px';
        el.style.height = (8 + Math.random()*18)+'px';
        el.style.borderRadius = (Math.random()>0.6? '2px' : '50%');
        confettiContainer.appendChild(el);
      }
    }

    function pickTemplate(style, name, note){
      const list = TEMPLATES[style] || TEMPLATES.warm;
      let txt = list[Math.floor(Math.random()*list.length)];
      txt = txt.replace('{name}', name || 'Friend');
      if(note){
        txt += " " + (note.endsWith('.') ? note : (note + '.'));
      }
      return txt;
    }

    function beautifySubline(style){
      if(style==='formal') return "May the festival of lights enlighten your future.";
      if(style==='fun') return "Lights, sweets & lots of smiles — enjoy!";
      return "May your days be bright & your heart light.";
    }

    function beautifyFrom(name){
      if(!name) return "— From your friends";
      return `— ${name}`;
    }

    genBtn.addEventListener('click', (e)=>{
      e.preventDefault();
      const name = nameEl.value.trim();
      const note = noteEl.value.trim();
      const style = styleEl.value;

      const full = pickTemplate(style, name || 'You', note);
      let main = full;
      const firstDot = full.indexOf('.');
      if(firstDot>20 && firstDot<100){
        main = full.slice(0, firstDot+1);
      } else if(full.length>80){
        main = full.slice(0, 80) + '…';
      }
      greetingEl.textContent = main;
      subEl.textContent = beautifySubline(style);
      fromEl.innerHTML = beautifyFrom(name ? name : 'Your well-wisher');

      spawnConfetti();
      greetingEl.style.transform = 'scale(0.98)';
      greetingEl.style.opacity = '0.0';
      setTimeout(()=>{ greetingEl.style.transform='scale(1)'; greetingEl.style.opacity='1'; }, 80);
    });

    copyBtn.addEventListener('click', ()=>{
      const text = greetingEl.textContent + "\n\n" + subEl.textContent + "\n" + fromEl.textContent;
      navigator.clipboard.writeText(text).then(()=>{
        copyBtn.textContent = 'Copied ✓';
        setTimeout(()=> copyBtn.textContent = 'Copy', 1300);
      }).catch(()=>{
        alert('Unable to copy — please select the text and copy manually.');
      });
    });

    downloadBtn.addEventListener('click', async ()=>{
      const canvas = document.createElement('canvas');
      const width = 1400, height = 900;
      canvas.width = width; canvas.height = height;
      const ctx = canvas.getContext('2d');

      const g = ctx.createLinearGradient(0,0,width,height);
      g.addColorStop(0, '#fffaf0');
      g.addColorStop(1, '#fff1f6');
      ctx.fillStyle = g;
      ctx.fillRect(0,0,width,height);

      ctx.fillStyle = '#ffd1a4';
      ctx.beginPath();
      ctx.ellipse(120,140,80,28,0,0,Math.PI*2); ctx.fill();
      ctx.fillStyle = '#ffb36b';
      ctx.beginPath(); ctx.moveTo(60,160); ctx.quadraticCurveTo(140,40,220,160); ctx.fill();
      ctx.fillStyle = '#fff8c6'; ctx.beginPath(); ctx.moveTo(140,60); ctx.quadraticCurveTo(120,20,100,60); ctx.fill();

      ctx.fillStyle = '#5a3b33';
      ctx.font = 'bold 44px Georgia';
      ctx.textAlign = 'center';
      ctx.fillText('Shubh Deepavali', width/2, 120);

      const main = greetingEl.textContent || 'May your dreams shine bright — Wishing you a joyous and prosperous Diwali!';
      ctx.fillStyle = '#34231f';
      ctx.font = '700 42px Georgia';
      wrapText(ctx, main, width/2, 200, 1100, 56);

      ctx.font = '400 26px "Arial"';
      ctx.fillStyle = '#6b6b6b';
      ctx.fillText(subEl.textContent, width/2, 460);

      ctx.font = '700 22px Arial';
      ctx.fillText(fromEl.textContent, width/2, 520);

      ctx.font = '16px Arial';
      ctx.fillStyle = '#8b6b63';
      ctx.fillText('Generated with ❤️ — Your Quick Diwali Card', width/2, height - 40);

      const link = document.createElement('a');
      link.download = 'diwali-card.png';
      link.href = canvas.toDataURL('image/png');
      link.click();
    });

    function wrapText(ctx, text, x, y, maxWidth, lineHeight){
      const words = text.split(' ');
      let line = '';
      for(let n=0;n<words.length;n++){
        const testLine = line + words[n] + ' ';
        const metrics = ctx.measureText(testLine);
        const testWidth = metrics.width;
        if(testWidth > maxWidth && n>0){
          ctx.fillText(line.trim(), x, y);
          line = words[n] + ' ';
          y += lineHeight;
        } else {
          line = testLine;
        }
      }
      ctx.fillText(line.trim(), x, y);
    }

    document.addEventListener('DOMContentLoaded', ()=>{
      genBtn.click();
    });
  </script>

</body>
</html>
